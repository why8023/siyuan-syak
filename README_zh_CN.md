# 思源笔记 Anki 同步插件

这个插件用于将思源笔记中的闪卡同步到 Anki，便于利用 Anki 的间隔重复功能进行记忆。

## 功能特点

- 将思源笔记中的闪卡一键同步到 Anki
- 支持手动同步和自动同步模式
- 自定义同步的牌组、模板和字段
- 保留思源笔记中的闪卡格式（支持HTML内容）

## 安装前提

1. 安装 [Anki](https://apps.ankiweb.net/)
2. 安装 [AnkiConnect](https://ankiweb.net/shared/info/2055492159) 插件
   - 在 Anki 中点击 "工具" -> "附加组件" -> "获取附加组件..."
   - 输入代码 `2055492159`
   - 重启 Anki

## 使用方法

### 基本设置

1. 在思源笔记中安装和启用该插件
2. 点击顶部工具栏中的闪卡图标（或者从菜单中选择插件设置）
3. 配置以下参数：
   - Anki Connect URL: 默认为 `http://127.0.0.1:8765`（如有修改请相应调整）
   - 默认牌组：选择要导出到的 Anki 牌组
   - 默认模板：选择要使用的 Anki 笔记模板
   - 前面字段：用于存储闪卡正面内容的字段名
   - 背面字段：用于存储闪卡背面内容的字段名
   - 同步模式：手动或自动
   - 自动同步间隔：如果选择自动模式，设置同步的时间间隔（分钟）

### 同步闪卡

有两种方式同步闪卡：

1. **手动同步**：点击顶部工具栏中的闪卡图标
2. **自动同步**：启用自动同步模式后，插件会按照设定的时间间隔自动将闪卡同步到 Anki

### 同步规则

- 插件会将思源笔记中所有闪卡同步到指定的 Anki 牌组
- 同步时会检查重复闪卡，避免重复添加
- 闪卡的前后内容会保持原有格式，支持 HTML 内容

## 常见问题

1. **无法连接到 Anki**
   - 确保 Anki 已经打开
   - 确保已安装 AnkiConnect 插件并重启过 Anki
   - 检查 Anki Connect URL 是否正确

2. **同步失败**
   - 检查 Anki 中是否有指定的牌组和模板
   - 查看浏览器控制台日志获取详细错误信息

3. **同步后在 Anki 中看不到新卡片**
   - 在 Anki 中刷新界面（按 F5）
   - 检查是否同步到了正确的牌组

## 开发说明

该插件使用 TypeScript 和 Svelte 开发，主要功能：

1. 从思源笔记获取闪卡数据
2. 通过 Anki Connect API 将数据发送到 Anki
3. 提供界面进行配置和管理

## 版权和鸣谢

- 本插件基于 [MIT 许可证](LICENSE) 发布
- 特别感谢思源笔记团队和 AnkiConnect 插件的开发者

## 反馈和建议

如果您有任何问题或建议，请通过以下方式联系：

- 在 GitHub 上提交 [Issues](https://github.com/username/siyuan-syak/issues)
- 在思源笔记社区论坛中留言
